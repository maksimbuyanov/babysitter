# Радио няня для дома

* анализирует и сохраняет в базе влажность и температуру 
* регистрирует время сна ребенка
* оповещает по телеграм боту о том, когда ребенок проснулся

## Телеграм:
* показать текущую температуру и влажность
* изменить пороговую температуру и влажность
* показать когда ребенок спас последний раз ( сколько ребенок уже не спит )
* вступать в бота можно только по приватной ссылки от админа
* настройка резервной wifi сети

## Бэкенд:
* хранит инфу о доступных резервных сетях (в шифрованном виде, скорее всего в json вне контейнера)
* хранит инфу для настроек модуля (скорее всего просто в json вне контейнера)
* сохраняет данные с датчиков при превышении дельты (только при условии что последняя запись в таблице отличается от текущей)
* фиксирует время начала и конца фазы "сна"
* отправляет в телеграм сообщения об изменении фазы или "шуме" или превышении порогов по датчикам

### Переменные при сборке
* хэш функция для дешифровки информации о сетях
* адрес хоста
* токен бота
* ник админа?
* адрес базы
* логин и пароль для базы
* минимальную дельту для сохранения данных в базе (по каждому отдельно)
* может выдать последние данные с датчиков по запросу

## БД
* Используется докер образ mySQL
* используется отдельная таблица для температуры, влажности (**Изучить на сколько измениться размер базы**)
* Таблица "фазы сна" содержит таймштамп и состояние wake или sleep

## Модуль с датчиком:
* при включении синхронизирует с бэком 
  * ~~пороговые значения для температуры и влажности~~
  * время для опроса датчиков
  * резервную wifi сеть
  * пороговое значение для датчика шума
  * время повышенного шума для выключения режима "сна"
* через указанный промежуток считывает температуру и влажность
* через указанный промежуток отправляет данные на бэк
* при разрыве сети подключается к запасной и отправляет сообщение об успешном подключении к "ИМЯ СЕТИ"
* на устройстве есть кнопка (скорее всего сенсорная) которая отправляет на бэк информацию, о том что ребенок "перешел в режим сна" ( скорее всего стоит добавить определенную последовательность для нажатий, что бы исключить случайный срабатывания), факт включения подтверждается мягким миганием диодом
* в режиме "прослушки" анализирует окружающие шумы и если пороговое значение превышено, то отправляет сигнал на бэк
* при нажатии на клавишу или при превышении времени "шума" отправляет сигнал о завершении режима "сна"

## Фронтенд: 
*В планах ;)*


#### Стек
* Express
* TelegrammBotApi
* React

#### Список железок
* Wemos D1 mini
* DHT11
* SoundChecker?
* SensorButton
* LED
